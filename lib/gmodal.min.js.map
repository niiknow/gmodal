{"version":3,"file":"gmodal.min.js","sources":["webpack://gmodal/gmodal.min.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"gmodal\",[],t):\"object\"==typeof exports?exports.gmodal=t():e.gmodal=t()}(window,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"/\",n(n.s=0)}({\"+VvR\":function(e,t){e.exports=function(e,t){if(\"string\"!=typeof e)throw new TypeError(\"String expected\");t||(t=document);var n=/<([\\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\\s+|\\s+$/g,\"\");var i=n[1];if(\"body\"==i){return(l=t.createElement(\"html\")).innerHTML=e,l.removeChild(l.lastChild)}var l,r=o[i]||o._default,a=r[0],s=r[1],c=r[2];(l=t.createElement(\"div\")).innerHTML=s+e+c;for(;a--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);var d=t.createDocumentFragment();for(;l.firstChild;)d.appendChild(l.removeChild(l.firstChild));return d};var n,i=!1;\"undefined\"!=typeof document&&((n=document.createElement(\"div\")).innerHTML='  <link/><table></table><a href=\"/a\">a</a><input type=\"checkbox\"/>',i=!n.getElementsByTagName(\"link\").length,n=void 0);var o={legend:[1,\"<fieldset>\",\"</fieldset>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],_default:i?[1,\"X<div>\",\"</div>\"]:[0,\"\",\"\"]};o.td=o.th=[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],o.option=o.optgroup=[1,'<select multiple=\"multiple\">',\"</select>\"],o.thead=o.tbody=o.colgroup=o.caption=o.tfoot=[1,\"<table>\",\"</table>\"],o.polyline=o.ellipse=o.polygon=o.circle=o.text=o.line=o.path=o.rect=o.g=[1,'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">',\"</svg>\"]},0:function(e,t,n){e.exports=n(\"tjUo\")},\"3RWh\":function(e,t,n){\"use strict\";t.a='<div class=\"gmodal-container\">\\n\\t<div class=\"gmodal-wrap gmodal-left\"></div>\\n\\t<div class=\"gmodal-wrap gmodal-content\" id=\"gmodalContent\"></div>\\n\\t<div class=\"gmodal-wrap gmodal-right\"></div>\\n<div>'},cpc2:function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[\"$\"+e]=this._callbacks[\"$\"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks[\"$\"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks[\"$\"+e],this;for(var o=0;o<i.length;o++)if((n=i[o])===t||n.fn===t){i.splice(o,1);break}return 0===i.length&&delete this._callbacks[\"$\"+e],this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks[\"$\"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[\"$\"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},eiJg:function(e,t,n){\"use strict\";t.a=\".gmodal {\\n    display: none;\\n    overflow: hidden;\\n    outline: 0;\\n    -webkit-overflow-scrolling: touch;\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 200%;\\n    z-index: 9999990;  /* based on safari 16777271 */ \\n}\\n.gmodal .frameshim {\\n    position: absolute;\\n    display: block;\\n    visibility: hidden;\\n    width: 100%;\\n    height: 100%;\\n    margin: 0;\\n    top: 0;\\n    left: 0;\\n    border: none;\\n    z-index: -999;\\n}\\n.html-gmodal body .gmodal { display: block; }\\n.html-gmodal, .html-modal body { overflow: hidden; margin:0; padding:0; height:100%; width:100%; }\\n.gmodal-container { display: table; position: relative; width: 100%; height: 50%; }\\n.gmodal-wrap { display: table-cell; position: relative; vertical-align: middle; }\\n.gmodal-left, .gmodal-right { width: 50%; }\"},tjUo:function(e,t,n){\"use strict\";n.r(t),function(e){var i=n(\"3RWh\"),o=n(\"eiJg\");function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=n(\"cpc2\"),a=e,s=[];function c(e){return e.elWrapper.className=\"\".concat(e.baseCls||\"\"),e.el.className=\"gmodal-wrap gmodal-content\",setTimeout((function(){var t=e.doc.getElementsByTagName(\"html\")[0].className;return e.doc.getElementsByTagName(\"html\")[0].className=e.trim(t.replace(/html\\-gmodal/gi,\"\")),e.isVisible=!1,e.emit(\"hide\",e),\"function\"==typeof e.opts.hideCallback&&e.opts.hideCallback(e),e.opts._autoHideHandler&&(e.off(\"esc\",e.opts._autoHideHandler),e.off(\"click\",e.opts._autoHideHandler),e.off(\"tap\",e.opts._autoHideHandler)),0!==s.length?e.show():e}),e.opts.timeout||50),e}function d(e,t,n,i){var o,l,r;return 3===(r=(n=n||a.event).target||n.srcElement).nodeType&&(r=r.parentNode),e.hasCls(r.parentNode,\"\"+e.closeCls)&&(r=r.parentNode),l=\"gmodal-container gmodal-wrap\",\"click\"===t?(e.hasCls(r,l)||r===i)&&e.emit(\"click\",r,n):\"keypress\"===t?(e.hasCls(r,l)||r===i||r===e.doc||r===e.doc.body)&&27===(n.which||n.keyCode)&&e.emit(\"esc\",r,n):\"tap\"===t&&(e.hasCls(r,l)||r===i)&&e.emit(\"tap\",r,n),e.hasCls(r,\"\"+e.closeCls)&&(o={cancel:!1},e.emit(\"close\",o,r,n),o.cancel||c(e)),!0}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e);this.win=window,this._name=\"gmodal\",this.doc=this.win.document,this.ishim=null,this.elWrapper=null,this.el=null,this.opts={},this.baseCls=\"gmodal\",this.closeCls=\"gmodal-close\",this.tpl=i.a,this.css=o.a,this.domify=n(\"+VvR\"),this.emitter=r,console.log(this)}var t,p,u;return t=e,(p=[{key:\"addEvent\",value:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent(t,n):this.getAttr(e,\"on\"+t)?e[\"on\"+t]=n:e[t]=n,this}},{key:\"hasCls\",value:function(e,t){var n,i,o,l,r;for(i=n=0,o=(l=t.split(\" \")).length;n<o;i=++n)if(r=l[i],(\" \"+e.className+\" \").indexOf(\" \"+r+\" \")>=0)return!0;return!1}},{key:\"injectStyle\",value:function(e,t){var n,i;return(n=this.doc.getElementById(e))||((n=this.doc.createElement(\"style\")).id=e,n.type=\"text/css\",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(this.doc.createTextNode(t)),(i=(i=this.doc.getElementsByTagName(\"link\")[0])||(this.doc.head||this.doc.getElementsByTagName(\"head\")[0]).lastChild).parentNode.insertBefore(n,i)),this}},{key:\"createiFrame\",value:function(e,t){var n=this.doc.createElement(\"iframe\");return e&&(n.id=e),t&&(n.className=t),n.frameBorder=\"0\",n.marginWidth=\"0\",n.marginHeight=\"0\",n.setAttribute(\"border\",\"0\"),n.setAttribute(\"allowtransparency\",\"true\"),n.width=\"100%\",n.height=\"100%\",n}},{key:\"loadiFrame\",value:function(e,t,n,i){var o=this.createiFrame(n,i);if(e[0].appendChild(o),o.contentWindow)o.contentWindow.contents=t,o.src='javascript:window[\"contents\"]';else{var l=o.contentDocument||o.document;l.open(),l.write(t),l.close()}return o}},{key:\"trim\",value:function(e){return e.trim?e.trim():e.replace(/^\\s*|\\s*$/g,\"\")}},{key:\"show\",value:function(e,t){var n=this.doc;return!(!n&&!n.body)&&(this.elWrapper=function(e){var t=e.doc.getElementById(\"gmodal\");return t||(e.injectStyle(\"gmodalcss\",e.css),(t=e.doc.createElement(\"div\")).id=\"gmodal\",t.setAttribute?(t.setAttribute(\"aria-modal\",\"true\"),t.setAttribute(\"role\",\"dialog\"),t.setAttribute(\"aria-labelledby\",\"modalTitle\")):(t[\"aria-modal\"]=\"true\",t.role=\"dialog\",t[\"aria-labelledby\"]=\"modalTitle\"),e.addEvent(t,\"click\",(function(n){return d(e,\"click\",n,t)})),e.addEvent(t,\"keypress\",(function(n){return d(e,\"keypress\",n,t)})),e.doc.gmodalAttached||(e.addEvent(e.doc,\"keypress\",(function(n){return d(e,\"keypress\",n,t)})),e.doc.gmodalAttached=!0),e.addEvent(t,\"tap\",(function(n){return d(e,\"tap\",n,t)})),t.appendChild(e.domify(e.tpl)),e.doc.getElementsByTagName(\"body\")[0].appendChild(t)),t}(this),this.el||(this.el=this.doc.getElementById(\"gmodalContent\")),e&&(e.hideCallback=t,s.push(e)),!this.isVisible&&(s.length>0&&(e=s.shift()),!!e&&(function(e,t){var n,i,o,l,r,s;if(e.isVisible=!0,t&&(e.opts=t,e.opts.content)){for(;e.el.firstChild;)e.el.removeChild(e.el.firstChild);\"string\"==typeof e.opts.content?e.opts.content.indexOf(\"<!DOCTYPE\")>-1||e.opts.iframe?e.loadiFrame(e.el,e.opts.content,null,\"gmodal-iframe\"):e.el.appendChild(e.domify(e.opts.content)):e.el.appendChild(e.opts.content),e.opts.content=null}if(e.closeCls=e.opts.closeCls||e.closeCls,e.opts.disableScrollTop||a.scrollTo(0,0),e.elWrapper.style.display=e.elWrapper.style.visibility=\"\",e.elWrapper.className=e.trim(e.baseCls+\" \"+(e.opts.cls||\"\")),i=(n=e.doc.getElementsByTagName(\"html\")[0]).className,n.className=e.trim(i+\" html-gmodal\"),setTimeout((function(){e.emit(\"show-timeout\",e),e.el.className=e.trim(\" \".concat(e.el.className,\" \").replace(\" in \",\"\")+\" in\")}),e.opts.timeout||50),e.opts.hideOn)for(e.opts._autoHideHandler=function(){return c(e)},o=0,l=(r=e.opts.hideOn.split(\",\")).length;o<l;o++)\"esc\"!==(s=r[o])&&\"click\"!==s&&\"tap\"!==s||e.on(s,e.opts._autoHideHandler);e.emit(\"show\",e)}(this,e),this)))}},{key:\"hide\",value:function(){return this.elWrapper?(this.opts&&c(this),this):this}},{key:\"name\",get:function(){return this._name}}])&&l(t.prototype,p),u&&l(t,u),e}();r(p.prototype),t.default=new p}.call(this,n(\"yLpj\"))},yLpj:function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n}}).default}));"],"mappings":"AAAA","sourceRoot":""}