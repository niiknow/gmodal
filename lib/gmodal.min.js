/*!
 *  gmodal.js - v2.0.3
 *  build: Fri Jul 21 2017 03:14:55 GMT-0500 (CDT)
 *  a modal
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Wu",[],t):"object"==typeof exports?exports.Wu=t():e.Wu=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){return e.elWrapper.className=""+e.baseCls,e.el.className="gmodal-wrap gmodal-content",setTimeout(function(){var t=e.doc.getElementsByTagName("html")[0].className;if(e.doc.getElementsByTagName("html")[0].className=e.trim(t.replace(/html\-gmodal/gi,"")),e.isVisible=!1,e.emit("hide",e),"function"==typeof e.opts.hideCallback&&e.opts.hideCallback(e),e.opts._autoHideHandler&&(e.off("esc",e.opts._autoHideHandler),e.off("click",e.opts._autoHideHandler),e.off("tap",e.opts._autoHideHandler)),0!==v.length)return e.show()},e.opts.timeout||50),e}function r(e,t){var n=void 0,i=void 0,o=void 0,r=void 0,a=void 0,s=void 0;if(e.isVisible=!0,t&&(e.opts=t,e.opts.content)){for(;e.el.firstChild;)e.el.removeChild(e.el.firstChild);"string"==typeof e.opts.content?e.opts.content.indexOf("<!DOCTYPE")>-1||e.opts.iframe?e.loadiFrame(e.el,e.opts.content,null,"gmodal-iframe"):e.el.appendChild(e.domify(e.opts.content)):e.el.appendChild(e.opts.content),e.opts.content=null}if(e.closeCls=e.opts.closeCls||e.closeCls,e.opts.disableScrollTop||g.scrollTo(0,0),e.elWrapper.style.display=e.elWrapper.style.visibility="",e.elWrapper.className=e.trim(e.baseCls+" "+(e.opts.cls||"")),n=e.doc.getElementsByTagName("html")[0],i=n.className,n.className=e.trim(i+" html-gmodal"),setTimeout(function(){e.emit("show-timeout",e),e.el.className=e.trim((" "+e.el.className+" ").replace(" in ","")+" in")},e.opts.timeout||50),e.opts.hideOn)for(e.opts._autoHideHandler=function(){return l(e)},a=e.opts.hideOn.split(","),o=0,r=a.length;o<r;o++)"esc"!==(s=a[o])&&"click"!==s&&"tap"!==s||e.on(s,e.opts._autoHideHandler);return e.emit("show",e),e}function a(e,t,n,i){var o,r,a;return n=n||g.event,a=n.target||n.srcElement,3===a.nodeType&&(a=a.parentNode),e.hasCls(a.parentNode,""+e.closeCls)&&(a=a.parentNode),r="gmodal-container gmodal-wrap","click"===t?(e.hasCls(a,r)||a===i)&&e.emit("click",a,n):"keypress"===t?(e.hasCls(a,r)||a===i||a===e.doc||a===e.doc.body)&&27===(n.which||n.keyCode)&&e.emit("esc",a,n):"tap"===t&&(e.hasCls(a,r)||a===i)&&e.emit("tap",a,n),e.hasCls(a,""+e.closeCls)&&(o={cancel:!1},e.emit("close",o,a,n),o.cancel||l(e)),!0}function s(e){var t=e.doc.getElementById("gmodal");return t||(e.injectStyle("gmodalcss",e.css),t=e.doc.createElement("div"),t.id="gmodal",e.addEvent(t,"click",function(n){return a(e,"click",n,t)}),e.addEvent(t,"keypress",function(n){return a(e,"keypress",n,t)}),e.doc.gmodalAttached||(e.addEvent(e.doc,"keypress",function(n){return a(e,"keypress",n,t)}),e.doc.gmodalAttached=!0),e.addEvent(t,"tap",function(n){return a(e,"tap",n,t)}),t.appendChild(e.domify(e.tpl)),e.doc.getElementsByTagName("body")[0].appendChild(t)),t}var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(2),p=i(c),h=n(1),u=i(h),m=n(4),f=n(3),g=window,v=[],y=function(){function e(){o(this,e),this.win=window,this._name="gmodal",this.doc=this.win.document,this.ishim=null,this.elWrapper=null,this.el=null,this.opts={},this.baseCls="gmodal",this.closeCls="gmodal-close",this.tpl=m,this.css=f,this.domify=p.default}return d(e,[{key:"addEvent",value:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent(t,n):this.getAttr(e,"on"+t)?e["on"+t]=n:e[t]=n,this}},{key:"hasCls",value:function(e,t){var n=void 0,i=void 0,o=void 0,l=void 0,r=void 0;for(l=t.split(" "),i=n=0,o=l.length;n<o;i=++n)if(r=l[i],(" "+e.className+" ").indexOf(" "+r+" ")>=0)return!0;return!1}},{key:"injectStyle",value:function(e,t){var n=void 0,i=void 0,o=this;return n=o.doc.getElementById(e),n||(n=o.doc.createElement("style"),n.id=e,n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(o.doc.createTextNode(t)),i=o.doc.getElementsByTagName("link")[0],i=i||(o.doc.head||o.doc.getElementsByTagName("head")[0]).lastChild,i.parentNode.insertBefore(n,i)),o}},{key:"createiFrame",value:function(e,t){var n=this.doc.createElement("iframe");return e&&(n.id=e),t&&(n.className=t),n.frameBorder="0",n.marginWidth="0",n.marginHeight="0",n.setAttribute("border","0"),n.setAttribute("allowtransparency","true"),n.width="100%",n.height="100%",n}},{key:"loadiFrame",value:function(e,t,n,i){var o=this.createiFrame(n,i);if(e[0].appendChild(o),o.contentWindow)o.contentWindow.contents=t,o.src='javascript:window["contents"]';else{var l=o.contentDocument||o.document;l.open(),l.write(t),l.close()}return o}},{key:"trim",value:function(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}},{key:"show",value:function(e,t){var n=void 0,i=this;return!(!(n=i.doc)||!n.body)&&(i.elWrapper=s(i),i.el||(i.el=i.doc.getElementById("gmodalContent")),e&&(e.hideCallback=t,v.push(e)),!i.isVisible&&(v.length>0&&(e=v.shift()),!!e&&(r(i,e),i)))}},{key:"hide",value:function(){var e=this;return e.elWrapper?(e.opts&&l(e),e):e}},{key:"iShimmy",value:function(){var e=this;return e.elWrapper&&!e.shim&&(e.ishim=e.doc.createElement("iframe"),e.ishim.className="gmodal-iframeshim",e.ishim.frameBorder="0",e.ishim.marginWidth="0",e.ishim.marginHeight="0",e.ishim.scrolling="no",e.ishim.setAttribute("border","0"),e.ishim.height="100%",e.ishim.width="100%",e.elWrapper.appendChild(e.ishim)),e}},{key:"name",get:function(){return this._name}}]),e}(),b=new y;b.win.gmodal||((0,u.default)(y.prototype),b.win.gmodal=new y),e.exports=b.win.gmodal},function(e,t,n){function i(e){if(e)return o(e)}function o(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i,o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var i=0,o=n.length;i<o;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){function n(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i){var o=t.createElement("html");return o.innerHTML=e,o.removeChild(o.lastChild)}var r=l[i]||l._default,a=r[0],s=r[1],d=r[2],o=t.createElement("div");for(o.innerHTML=s+e+d;a--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var c=t.createDocumentFragment();o.firstChild;)c.appendChild(o.removeChild(o.firstChild));return c}e.exports=n;var i,o=!1;"undefined"!=typeof document&&(i=document.createElement("div"),i.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',o=!i.getElementsByTagName("link").length,i=void 0);var l={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:o?[1,"X<div>","</div>"]:[0,"",""]};l.td=l.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],l.option=l.optgroup=[1,'<select multiple="multiple">',"</select>"],l.thead=l.tbody=l.colgroup=l.caption=l.tfoot=[1,"<table>","</table>"],l.polyline=l.ellipse=l.polygon=l.circle=l.text=l.line=l.path=l.rect=l.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},function(e,t){e.exports=".gmodal {\n    display: none;\n    overflow: hidden;\n    outline: 0;\n    -webkit-overflow-scrolling: touch;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 200%;\n    z-index: 9999990;  /* based on safari 16777271 */ \n}\n.gmodal .frameshim {\n    position: absolute;\n    display: block;\n    visibility: hidden;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    top: 0;\n    left: 0;\n    border: none;\n    z-index: -999;\n}\n.html-gmodal body .gmodal { display: block; }\n.html-gmodal, .html-modal body { overflow: hidden; margin:0; padding:0; height:100%; width:100%; }\n.gmodal-container { display: table; position: relative; width: 100%; height: 50%; }\n.gmodal-wrap { display: table-cell; position: relative; vertical-align: middle; }\n.gmodal-left, .gmodal-right { width: 50%; }"},function(e,t){e.exports='<div class="gmodal-container">\n\t<div class="gmodal-wrap gmodal-left"></div>\n\t<div class="gmodal-wrap gmodal-content" id="gmodalContent"></div>\n\t<div class="gmodal-wrap gmodal-right"></div>\n<div>'},function(e,t,n){e.exports=n(0)}])});
//# sourceMappingURL=gmodal.min.js.map