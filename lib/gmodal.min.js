/*!
 * gmodal
 * a modal

 * @version v3.1.1
 * @author Tom Noogen
 * @homepage undefined
 * @repository undefined
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("gmodal",[],t):"object"==typeof exports?exports.gmodal=t():e.gmodal=t()}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}({"+VvR":function(e,t){e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var o=n[1];if("body"==o){return(l=t.createElement("html")).innerHTML=e,l.removeChild(l.lastChild)}var l,a=i[o]||i._default,r=a[0],s=a[1],c=a[2];(l=t.createElement("div")).innerHTML=s+e+c;for(;r--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);var d=t.createDocumentFragment();for(;l.firstChild;)d.appendChild(l.removeChild(l.firstChild));return d};var n,o=!1;"undefined"!=typeof document&&((n=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',o=!n.getElementsByTagName("link").length,n=void 0);var i={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:o?[1,"X<div>","</div>"]:[0,"",""]};i.td=i.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],i.option=i.optgroup=[1,'<select multiple="multiple">',"</select>"],i.thead=i.tbody=i.colgroup=i.caption=i.tfoot=[1,"<table>","</table>"],i.polyline=i.ellipse=i.polygon=i.circle=i.text=i.line=i.path=i.rect=i.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},0:function(e,t,n){e.exports=n("tjUo")},"3RWh":function(e,t,n){"use strict";t.a='<div class="gmodal-container">\n\t<div class="gmodal-wrap gmodal-left"></div>\n\t<div class="gmodal-wrap gmodal-content" id="gmodalContent"></div>\n\t<div class="gmodal-wrap gmodal-right"></div>\n<div>'},cpc2:function(e,t,n){function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,o=this._callbacks["$"+e];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<o.length;i++)if((n=o[i])===t||n.fn===t){o.splice(i,1);break}return 0===o.length&&delete this._callbacks["$"+e],this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(n){o=0;for(var i=(n=n.slice(0)).length;o<i;++o)n[o].apply(this,t)}return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},eiJg:function(e,t,n){"use strict";t.a=".gmodal {\n    display: none;\n    overflow: hidden;\n    outline: 0;\n    -webkit-overflow-scrolling: touch;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 200%;\n    z-index: 9999990;  /* based on safari 16777271 */ \n}\n.gmodal .frameshim {\n    position: absolute;\n    display: block;\n    visibility: hidden;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    top: 0;\n    left: 0;\n    border: none;\n    z-index: -999;\n}\n.html-gmodal body .gmodal { display: block; }\n.html-gmodal, .html-modal body { overflow: hidden; margin:0; padding:0; height:100%; width:100%; }\n.gmodal-container { display: table; position: relative; width: 100%; height: 50%; }\n.gmodal-wrap { display: table-cell; position: relative; vertical-align: middle; }\n.gmodal-left, .gmodal-right { width: 50%; }"},tjUo:function(e,t,n){"use strict";n.r(t),function(e){var o=n("3RWh"),i=n("eiJg");function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=n("cpc2"),r=e,s=[];function c(e){return e.elWrapper.className="".concat(e.baseCls||""),e.el.className="gmodal-wrap gmodal-content",setTimeout((function(){var t=e.doc.getElementsByTagName("html")[0].className;return e.doc.getElementsByTagName("html")[0].className=e.trim(t.replace(/html\-gmodal/gi,"")),e.isVisible=!1,e.emit("hide",e),"function"==typeof e.opts.hideCallback&&e.opts.hideCallback(e),e.opts._autoHideHandler&&(e.off("esc",e.opts._autoHideHandler),e.off("click",e.opts._autoHideHandler),e.off("tap",e.opts._autoHideHandler)),0!==s.length?e.show():e}),e.opts.timeout||50),e}function d(e,t,n,o){var i,l,a;if(3===(a=(n=n||r.event).target||n.srcElement).nodeType&&(a=a.parentNode),e.hasCls(a.parentNode,""+e.closeCls)&&(a=a.parentNode),l="gmodal-container gmodal-wrap","click"===t)(e.hasCls(a,l)||a===o)&&e.emit("click",a,n);else if("keypress"===t)(e.hasCls(a,l)||a===o||a===e.doc||a===e.doc.body)&&27===(n.which||n.keyCode)&&e.emit("esc",a,n);else if("tap"===t)(e.hasCls(a,l)||a===o)&&e.emit("tap",a,n);else if("keydown"===t&&!e.opts.allowBackgroundFocus&&e.el&&e.isVisible&&9===(n.which||n.keyCode)&&e.el.contains&&!e.el.contains(a)){if(n.preventDefault(),e.opts.autoFocusId){var s=e.doc.getElementById(e.opts.autoFocusId);s&&s.focus&&s.focus()}return!1}return e.hasCls(a,""+e.closeCls)&&(i={cancel:!1},e.emit("close",i,a,n),i.cancel||c(e)),!0}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.win=window,this._name="gmodal",this.doc=this.win.document,this.ishim=null,this.elWrapper=null,this.el=null,this.opts={},this.baseCls="gmodal",this.closeCls="gmodal-close",this.tpl=o.a,this.css=i.a,this.domify=n("+VvR"),this.emitter=a,this.isVisible=!1}var t,u,p;return t=e,(u=[{key:"addEvent",value:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent(t,n):this.getAttr(e,"on"+t)?e["on"+t]=n:e[t]=n,this}},{key:"hasCls",value:function(e,t){var n,o,i,l,a;for(o=n=0,i=(l=t.split(" ")).length;n<i;o=++n)if(a=l[o],(" "+e.className+" ").indexOf(" "+a+" ")>=0)return!0;return!1}},{key:"injectStyle",value:function(e,t){var n,o;return(n=this.doc.getElementById(e))||((n=this.doc.createElement("style")).id=e,n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(this.doc.createTextNode(t)),(o=(o=this.doc.getElementsByTagName("link")[0])||(this.doc.head||this.doc.getElementsByTagName("head")[0]).lastChild).parentNode.insertBefore(n,o)),this}},{key:"createiFrame",value:function(e,t){var n=this.doc.createElement("iframe");return e&&(n.id=e),t&&(n.className=t),n.frameBorder="0",n.marginWidth="0",n.marginHeight="0",n.setAttribute("border","0"),n.setAttribute("allowtransparency","true"),n.width="100%",n.height="100%",n}},{key:"loadiFrame",value:function(e,t,n,o){var i=this.createiFrame(n,o);if(e[0].appendChild(i),i.contentWindow)i.contentWindow.contents=t,i.src='javascript:window["contents"]';else{var l=i.contentDocument||i.document;l.open(),l.write(t),l.close()}return i}},{key:"trim",value:function(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}},{key:"show",value:function(e,t){var n=this.doc;return!(!n&&!n.body)&&(this.elWrapper=function(e){var t=e.doc.getElementById("gmodal");return t||(e.injectStyle("gmodalcss",e.css),(t=e.doc.createElement("div")).id="gmodal",t.setAttribute?(t.setAttribute("aria-modal","true"),t.setAttribute("role","dialog"),t.setAttribute("aria-labelledby","modalTitle")):(t["aria-modal"]="true",t.role="dialog",t["aria-labelledby"]="modalTitle"),e.addEvent(t,"click",(function(n){return d(e,"click",n,t)})),e.addEvent(t,"keypress",(function(n){return d(e,"keypress",n,t)})),e.doc.gmodalAttached||(e.addEvent(e.doc,"keypress",(function(n){return d(e,"keypress",n,t)})),e.addEvent(e.doc,"keydown",(function(n){return d(e,"keydown",n,t)})),e.doc.gmodalAttached=!0),e.addEvent(t,"tap",(function(n){return d(e,"tap",n,t)})),t.appendChild(e.domify(e.tpl)),e.doc.getElementsByTagName("body")[0].appendChild(t)),t}(this),this.el||(this.el=this.doc.getElementById("gmodalContent")),e&&(e.hideCallback=t,s.push(e)),!this.isVisible&&(s.length>0&&(e=s.shift()),!!e&&(function(e,t){var n,o,i,l,a,s;if(e.isVisible=!0,e.opts=t||e.opts,e.opts.content){for(;e.el.firstChild;)e.el.removeChild(e.el.firstChild);"string"==typeof e.opts.content?e.opts.content.indexOf("<!DOCTYPE")>-1||e.opts.iframe?e.loadiFrame(e.el,e.opts.content,null,"gmodal-iframe"):e.el.appendChild(e.domify(e.opts.content)):e.el.appendChild(e.opts.content),e.opts.content=null}if(e.opts.autoFocusId=e.opts.autoFocusId||"modalTitle",e.closeCls=e.opts.closeCls||e.closeCls,e.opts.disableScrollTop||r.scrollTo(0,0),e.elWrapper.style.display=e.elWrapper.style.visibility="",e.elWrapper.className=e.trim(e.baseCls+" "+(e.opts.cls||"")),o=(n=e.doc.getElementsByTagName("html")[0]).className,n.className=e.trim(o+" html-gmodal"),setTimeout((function(){e.emit("show-timeout",e),e.el.className=e.trim(" ".concat(e.el.className," ").replace(" in ","")+" in")}),e.opts.timeout||50),e.opts.hideOn)for(e.opts._autoHideHandler=function(){return c(e)},i=0,l=(a=e.opts.hideOn.split(",")).length;i<l;i++)"esc"!==(s=a[i])&&"click"!==s&&"tap"!==s||e.on(s,e.opts._autoHideHandler);e.emit("show",e)}(this,e),this)))}},{key:"hide",value:function(){return this.elWrapper?(this.opts&&c(this),this):this}},{key:"name",get:function(){return this._name}}])&&l(t.prototype,u),p&&l(t,p),e}();a(u.prototype),t.default=new u}.call(this,n("yLpj"))},yLpj:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}}).default}));
//# sourceMappingURL=gmodal.min.js.map